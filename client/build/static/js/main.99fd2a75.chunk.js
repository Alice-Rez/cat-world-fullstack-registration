(this.webpackJsonpproject1=this.webpackJsonpproject1||[]).push([[0],{34:function(e,t,a){e.exports=a(64)},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(32),c=a.n(r),s=a(2),o=a(8),m=a(1),u=Object(l.createContext)();function i(){return n.a.createElement("h1",{className:"display-2 text-success mx-auto my-5"},"Welcome to our site!")}var p=a(11),d=a(10),b=a(7),E=a.n(b);function g(e){var t=Object(l.useState)({}),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(l.useState)(!1),m=Object(s.a)(o,2),u=m[0],i=m[1],b=function(e){i(!1),c(Object(d.a)(Object(d.a)({},r),{},Object(p.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"container"},n.a.createElement("h2",{className:"display-4 text-info py-3 text-left"},"Login"),n.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log("request send",r),E()({method:"POST",url:"/users/login",data:r}).then((function(t){console.log(t),t.data.logged?(e.setIsLogged(!0),e.setLoggedUser(t.data.uname),localStorage.setItem("userName",t.data.uname),e.setUserId(t.data.email)):i(!0)})).catch((function(e){return console.log(e)}))}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),n.a.createElement("input",{type:"mail",name:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",onInput:b}),n.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),n.a.createElement("input",{type:"password",name:"password",className:"form-control",id:"exampleInputPassword1",onInput:b})),n.a.createElement("div",{className:"form-group form-check"},n.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"exampleCheck1"}),n.a.createElement("label",{className:"form-check-label",htmlFor:"exampleCheck1"},"Check me out")),n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{type:"submit",className:"btn btn-success btn-lg"},"Login"))),u?n.a.createElement("div",{className:"alert-danger m-3 p-3"}," ","Combination of the e-mail and password is not correct"):null)}function f(e){return Object(l.useEffect)((function(){console.log("axios calling"),E()({method:"GET",url:"/users/logout"}).then((function(t){console.log(t),delete localStorage.userName,e.setIsLogged(t.data.logged)})).catch((function(e){return console.log(e)}))}),[]),n.a.createElement("div",null)}function h(){var e=Object(l.useContext)(u);return n.a.createElement("nav",{className:"navbar navbar-expand-lg "},n.a.createElement(o.b,{to:"/home",className:"navbar-brand"},"Home"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",null,"\u2630")),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},n.a.createElement("ul",{className:"navbar-nav mr-auto"},n.a.createElement("li",{className:"nav-item active"},n.a.createElement(o.b,{to:"/users",className:"nav-link"},"Users")),n.a.createElement("li",{className:"nav-item active"},n.a.createElement(o.b,{to:"/products",className:"nav-link"},"Products")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(o.b,{to:"/profile",className:"nav-link"},"Profile")),e.visibility?n.a.createElement("li",{className:"nav-item"},n.a.createElement(o.b,{to:"/update",className:"nav-link"},"Settings")):null),n.a.createElement("div",null,e.visibility?null:n.a.createElement(o.b,{to:"/register",className:"nav-link"},"Sign up")),n.a.createElement("div",null,e.visibility?n.a.createElement(o.b,{to:"/log-out",className:"nav-link"},"Log out"):n.a.createElement(o.b,{to:"/log-in",className:"nav-link"},"Log in"))))}var v=a(14),N=a(15),j=a(17),O=a(16),y=function(e){Object(j.a)(a,e);var t=Object(O.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,"Here are our cool products")}}]),a}(l.Component);function x(){var e=localStorage.getItem("userName");return n.a.createElement("div",{className:"alert-success"},"Welcome ",e,", here are your profile information")}var w=function(e){Object(j.a)(a,e);var t=Object(O.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.context.visibility?n.a.createElement(x,null):n.a.createElement("div",null,"The content is visible just for signed-in people"))}}]),a}(l.Component);function I(){var e=Object(m.g)(),t=Object(l.useState)({}),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(l.useState)({}),u=Object(s.a)(o,2),i=u[0],b=u[1],g=Object(l.useState)(!1),f=Object(s.a)(g,2),h=f[0],v=f[1],N=Object(l.useState)(""),j=Object(s.a)(N,2),O=j[0],y=j[1],x=function(e){v(!1),c(Object(d.a)(Object(d.a)({},r),{},Object(p.a)({},e.target.name,e.target.value)))};return n.a.createElement("form",{className:"container",onSubmit:function(t){t.preventDefault(),b({}),E()({method:"POST",url:"/users/register",data:r}).then((function(t){if(console.log(t),t.data.msg){var a=t.data.msg.reduce((function(e,t){return e[t.param]=!0,e}),{});b(a)}else 11e3===t.data.code?(y(Object.keys(t.data.keyValue)[0]),v(!0)):e.push("/log-in")})).catch((function(e){return console.log(e)}))},encType:"multipart/form-data"},n.a.createElement("h2",{className:"display-4 text-info py-3 text-left"},"Registration"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"name"},"Full Name"),n.a.createElement("input",{type:"text",name:"fullName",id:"name",className:"form-control",onInput:x}),i.fullName?n.a.createElement("small",{className:"text-danger mt-1"},"Your full name shall contain just letters"):null),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"mail"},"E-mail"),n.a.createElement("input",{type:"text",name:"email",id:"mail",required:!0,className:"form-control",onInput:x}),i.email?n.a.createElement("small",{className:"text-danger mt-1"},"E-mail do not correspond to typical rules for email"):null),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"date"},"User name"),n.a.createElement("input",{type:"text",name:"uname",id:"date",required:!0,className:"form-control",onInput:x}),i.uname?n.a.createElement("small",{className:"text-danger mt-1"},"Please use just letters and numbers in your username"):null),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"pwd"},"Password"),n.a.createElement("input",{type:"password",name:"password",id:"pwd",required:!0,className:"form-control",onInput:x}),i.password?n.a.createElement("small",{className:"text-danger mt-1"},"Your password is too short, you need at least 10 characters"):null),n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{type:"submit",className:"btn btn-success btn-lg"},"Register")),h?n.a.createElement("div",{className:"alert-danger m-3 p-3"},"User with this ",O," already exists, please log-in"):null)}w.contextType=u;var S=a(19);function k(){var e=Object(l.useContext)(u).userID,t=Object(l.useState)({preview:"",raw:""}),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(l.useState)({userID:e}),m=Object(s.a)(o,2),i=m[0],b=m[1],g=Object(l.useState)(!1),f=Object(s.a)(g,2),h=f[0],v=f[1],N=Object(l.useState)(!1),j=Object(s.a)(N,2),O=j[0],y=j[1],x=Object(l.useState)(!1),w=Object(s.a)(x,2),I=w[0],k=w[1];Object(l.useEffect)((function(){E()({method:"GET",url:"users/info/".concat(e)}).then((function(e){console.log(e),Array.isArray(e.data)?c(Object(d.a)(Object(d.a)({},r),{},{preview:e.data[0].profileImage})):console.log("you are not logged!")})).catch((function(e){return console.log(e)}))}),[]);var P=function(e){v(!1),k(!1),b(Object(d.a)(Object(d.a)({},i),{},Object(p.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"container"},n.a.createElement("h2",{className:"text-info py-3 text-left"},"Change Password"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v(!1),v(!1),console.log("request send",i),E()({method:"PUT",url:"/users/updatePWD",data:i}).then((function(e){console.log(e),e.data.nModified>0?v(!0):k(!0)})).catch((function(e){return console.log(e)}))}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Current Password"),n.a.createElement("input",{type:"password",name:"password",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",onInput:P})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"exampleInputPassword1"},"New Password"),n.a.createElement("input",{type:"password",name:"newPassword",className:"form-control",id:"exampleInputPassword1",onInput:P})),n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{type:"submit",className:"btn btn-success btn-lg"},"Save"))),h?n.a.createElement("div",{className:"alert-success m-3 p-3"},"Your password was changed"):null,I?n.a.createElement("div",{className:"alert-danger m-3 p-3"},"Your password could not be changed, please make sure you are using correct current password"):null,n.a.createElement("h2",{className:"text-info py-3 text-left"},"Change profile photo"),n.a.createElement("form",{encType:"multipart/form-data",onSubmit:function(t){t.preventDefault();var a=new FormData;a.append("file",r.raw),a.append("userID",e),E()({method:"PUT",url:"/users/updatePhoto",data:a}).then((function(e){console.log(e),y(!0)})).catch((function(e){return console.log(e)}))}},n.a.createElement("div",{className:"image-input"},n.a.createElement("label",{htmlFor:"upload-button",className:"mb-3 d-flex align-items-center"},r.preview?n.a.createElement("img",{src:r.preview,alt:"profile-pic",className:"rounded-circle ml-3 profile-photo"}):n.a.createElement("span",null,n.a.createElement(S.a,{className:"display-2"})),n.a.createElement("div",{className:"ml-3"},n.a.createElement("h6",null,"Upload photo"),n.a.createElement("small",null,"image shall be in square format"))),n.a.createElement("input",{type:"file",name:"userImg",className:"d-none",id:"upload-button",onChange:function(e){e.target.files.length&&c({preview:URL.createObjectURL(e.target.files[0]),raw:e.target.files[0]})}})),n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{type:"submit",className:"btn btn-success btn-lg"},"Save"))),O?n.a.createElement("div",{className:"alert-success m-3 p-3"},"Your profile photo was changed"):null)}function P(){var e=Object(l.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(l.useEffect)((function(){E()({method:"GET",url:"/users/all"}).then((function(e){console.log(e.data),r(e.data)})).catch((function(e){return console.log(e)}))}),[]),n.a.createElement("main",{className:"container d-flex justify-content-center py-5"},n.a.createElement("table",{className:"table table-striped"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"E-mail"),n.a.createElement("th",{scope:"col"},"User Name"),n.a.createElement("th",{scope:"col"},"Full name"),n.a.createElement("th",{scope:"col"}," Photo"))),n.a.createElement("tbody",null,a.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.email),n.a.createElement("td",null,e.username||e.uname),n.a.createElement("td",null,e.fullname||e.fullName),n.a.createElement("td",null,n.a.createElement("img",{src:e.profileImage,alt:"",className:"profile-photo rounded-circle"})))})))))}function C(){var e=Object(l.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(l.useState)(""),p=Object(s.a)(c,2),d=p[0],b=p[1],E=Object(l.useState)(),v=Object(s.a)(E,2),N=v[0],j=v[1];return n.a.createElement(u.Provider,{value:{visibility:a,user:d,userID:N}},n.a.createElement(o.a,null,n.a.createElement(h,null),n.a.createElement(m.d,null,n.a.createElement(m.b,{path:"/home"},n.a.createElement(i,null)),n.a.createElement(m.b,{path:"/users"},n.a.createElement(P,null)),n.a.createElement(m.b,{path:"/register"},a?n.a.createElement(m.a,{to:"/profile"}):n.a.createElement(I,null)),n.a.createElement(m.b,{path:"/profile"},n.a.createElement(w,null)),n.a.createElement(m.b,{path:"/update"},a?n.a.createElement(k,null):n.a.createElement(m.a,{to:"/log-in"})),n.a.createElement(m.b,{path:"/log-in"},a?n.a.createElement(m.a,{to:"/profile"}):n.a.createElement(g,{setIsLogged:r,setLoggedUser:b,setUserId:j})),n.a.createElement(m.b,{path:"/log-out"},a?n.a.createElement(f,{setIsLogged:r}):n.a.createElement(m.a,{to:"/log-in"})),n.a.createElement(m.b,{path:"/products"},n.a.createElement(y,null)),n.a.createElement(m.b,{path:"*"},n.a.createElement(m.a,{to:"/home"})))))}a(62),a(63);var F=document.getElementById("root");c.a.render(n.a.createElement(C,null),F)}},[[34,1,2]]]);
//# sourceMappingURL=main.99fd2a75.chunk.js.map